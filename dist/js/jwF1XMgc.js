import{S as x}from"./DEnVEwvk.js";import{_ as B}from"./C3Fohc35.js";import{bG as f,bC as h,bV as N,bK as i,bL as u,bM as e,bR as M,ce as v,bY as g,cl as U,bO as C,bP as D,bS as S,bT as d,bQ as q,cf as V,cg as L}from"./DUMqHgQJ.js";const K={class:"bg-surface-0 dark:bg-surface-900 min-h-screen"},W={class:"container mx-auto px-4 py-6"},A={class:"bg-white dark:bg-surface-800 rounded-lg shadow-sm border border-surface-200 dark:border-surface-700 p-4 mb-6"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},G={class:"relative"},O={class:"bg-white dark:bg-surface-800 rounded-lg shadow-sm border border-surface-200 dark:border-surface-700 overflow-hidden"},E={class:"overflow-x-auto"},H={class:"w-full"},Q={class:"bg-surface-50 dark:bg-surface-800/50 border-b border-surface-200 dark:border-surface-700"},R=["onClick"],Y={class:"flex items-center gap-1"},J={class:"px-4 py-3 text-sm text-surface-800 dark:text-white"},X={class:"px-4 py-3 text-sm text-surface-800 dark:text-white"},Z={class:"px-4 py-3"},ee={class:"px-4 py-3 text-sm text-surface-800 dark:text-white"},te={class:"px-4 py-3 text-sm text-surface-800 dark:text-white"},ae={class:"px-4 py-3 text-sm text-surface-800 dark:text-white"},re={class:"px-4 py-3 text-sm text-surface-800 dark:text-white"},se={key:0,class:"py-10 flex justify-center items-center"},oe={key:1,class:"py-10 flex flex-col justify-center items-center"},le={key:2,class:"px-4 py-3 border-t border-surface-200 dark:border-surface-700 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},de={class:"text-sm text-surface-500 dark:text-surface-400"},ue={class:"flex items-center gap-2"},ne={class:"flex items-center gap-1"},ie=["disabled"],ce=["disabled"],fe={class:"px-3 py-1 text-sm text-surface-800 dark:text-white bg-surface-100 dark:bg-surface-800 rounded border border-surface-300 dark:border-surface-600"},be=["disabled"],pe=["disabled"],xe={__name:"LogsView",setup(ve){const $=[{key:"id",label:"日志ID"},{key:"operator",label:"操作人"},{key:"type",label:"操作类型"},{key:"action",label:"操作内容"},{key:"ip",label:"IP地址"},{key:"user_agent",label:"用户代理"},{key:"created_at",label:"操作时间"}],w=f([]),k=f(!1),l=f({operator:"",type:"",date:""}),o=f({key:null,direction:"asc"}),s=f(1),n=f(10),b=h(()=>{let r=[...w.value];if(l.value.operator){const t=l.value.operator.toLowerCase();r=r.filter(a=>a.operator.toLowerCase().includes(t))}if(l.value.type&&(r=r.filter(t=>t.type===l.value.type)),l.value.date){const t=new Date(l.value.date);r=r.filter(a=>new Date(a.created_at).toDateString()===t.toDateString())}return o.value.key&&r.sort((t,a)=>{let c=t[o.value.key],p=a[o.value.key];return o.value.key==="created_at"&&(c=new Date(c),p=new Date(p)),c<p?o.value.direction==="asc"?-1:1:c>p?o.value.direction==="asc"?1:-1:0}),r}),y=h(()=>Math.ceil(b.value.length/n.value)),_=h(()=>{const r=(s.value-1)*n.value,t=r+n.value;return b.value.slice(r,t)}),T=()=>{k.value=!0,setTimeout(()=>{const r=[];for(let t=1;t<=50;t++)r.push({id:t,operator:["张三","李四","王五","赵六"][Math.floor(Math.random()*4)],type:["login","logout","create","update","delete","query"][Math.floor(Math.random()*6)],action:`执行了${["登录","登出","创建","更新","删除","查询"][Math.floor(Math.random()*6)]}操作`,ip:`${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,user_agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",created_at:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString().replace("T"," ").slice(0,19)});w.value=r,k.value=!1},500)},m=()=>{s.value=1},I=r=>{o.value.key===r?o.value.direction=o.value.direction==="asc"?"desc":"asc":(o.value.key=r,o.value.direction="asc")},P=()=>{s.value=1},j=r=>({login:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",logout:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",create:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",update:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",delete:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",query:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"})[r]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",z=r=>r||"";return N(()=>{T()}),(r,t)=>(u(),i("div",K,[t[15]||(t[15]=e("div",{class:"border-b border-surface-200 dark:border-surface-800"},[e("div",{class:"container mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-surface-800 dark:text-white"},"操作日志"),e("p",{class:"text-surface-500 dark:text-surface-400 mt-1"},"系统操作日志记录")])])],-1)),e("div",W,[e("div",A,[e("div",F,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1"},"操作人",-1)),e("div",G,[M(g(x),{icon:"search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-surface-400"}),v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>l.value.operator=a),onInput:m,placeholder:"请输入操作人",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all"},null,544),[[V,l.value.operator]])])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1"},"操作类型",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.type=a),onChange:m,class:"w-full px-4 py-2 rounded-lg border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all"},[...t[9]||(t[9]=[U('<option value="" data-v-66f2a88b>全部</option><option value="login" data-v-66f2a88b>登录</option><option value="logout" data-v-66f2a88b>登出</option><option value="create" data-v-66f2a88b>创建</option><option value="update" data-v-66f2a88b>更新</option><option value="delete" data-v-66f2a88b>删除</option><option value="query" data-v-66f2a88b>查询</option>',7)])],544),[[L,l.value.type]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1"},"操作日期",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.date=a),onChange:m,class:"w-full px-4 py-2 rounded-lg border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all"},null,544),[[V,l.value.date]])])])]),e("div",O,[e("div",E,[e("table",H,[e("thead",null,[e("tr",Q,[(u(),i(C,null,D($,a=>e("th",{key:a.key,onClick:c=>I(a.key),class:"px-4 py-3 text-left text-sm font-medium text-surface-700 dark:text-surface-300 cursor-pointer hover:bg-surface-100 dark:hover:bg-surface-700/50 transition-all"},[e("div",Y,[e("span",null,d(a.label),1),o.value.key===a.key?(u(),S(g(x),{key:0,icon:o.value.direction==="asc"?"sort-up":"sort-down",class:"text-xs"},null,8,["icon"])):(u(),S(g(x),{key:1,icon:"sort",class:"text-xs text-surface-400"}))])],8,R)),64))])]),e("tbody",null,[(u(!0),i(C,null,D(_.value,a=>(u(),i("tr",{key:a.id,class:"border-b border-surface-200 dark:border-surface-700 hover:bg-surface-50 dark:hover:bg-surface-800/50 transition-all"},[e("td",J,d(a.id),1),e("td",X,d(a.operator),1),e("td",Z,[e("span",{class:q(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",j(a.type)])},d(a.type),3)]),e("td",ee,d(a.action),1),e("td",te,d(a.ip),1),e("td",ae,d(a.user_agent),1),e("td",re,d(z(a.created_at)),1)]))),128))])])]),k.value?(u(),i("div",se,[...t[12]||(t[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"},null,-1)])])):_.value.length===0?(u(),i("div",oe,[M(g(x),{icon:"file-alt",class:"text-4xl text-surface-300 dark:text-surface-600 mb-2"}),t[13]||(t[13]=e("p",{class:"text-surface-500 dark:text-surface-400"},"暂无日志数据",-1))])):(u(),i("div",le,[e("div",de," 显示 "+d((s.value-1)*n.value+1)+" 到 "+d(Math.min(s.value*n.value,b.value.length))+" 条，共 "+d(b.value.length)+" 条 ",1),e("div",ue,[v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>n.value=a),onChange:P,class:"px-2 py-1 rounded border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},[...t[14]||(t[14]=[e("option",{value:"5"},"5条/页",-1),e("option",{value:"10"},"10条/页",-1),e("option",{value:"20"},"20条/页",-1),e("option",{value:"50"},"50条/页",-1)])],544),[[L,n.value]]),e("div",ne,[e("button",{onClick:t[4]||(t[4]=a=>s.value=1),disabled:s.value===1,class:"px-3 py-1 rounded border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white text-sm hover:bg-surface-100 dark:hover:bg-surface-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all"}," 首页 ",8,ie),e("button",{onClick:t[5]||(t[5]=a=>s.value--),disabled:s.value===1,class:"px-3 py-1 rounded border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white text-sm hover:bg-surface-100 dark:hover:bg-surface-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all"}," 上一页 ",8,ce),e("span",fe,d(s.value),1),e("button",{onClick:t[6]||(t[6]=a=>s.value++),disabled:s.value===y.value,class:"px-3 py-1 rounded border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white text-sm hover:bg-surface-100 dark:hover:bg-surface-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all"}," 下一页 ",8,be),e("button",{onClick:t[7]||(t[7]=a=>s.value=y.value),disabled:s.value===y.value,class:"px-3 py-1 rounded border border-surface-300 dark:border-surface-600 bg-surface-0 dark:bg-surface-900 text-surface-800 dark:text-white text-sm hover:bg-surface-100 dark:hover:bg-surface-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all"}," 末页 ",8,pe)])])]))])])]))}},me=B(xe,[["__scopeId","data-v-66f2a88b"]]);export{me as default};

import{_ as F}from"./nNeb7KJf.js";import{_ as d}from"./B1TMtX0U.js";import{_ as S}from"./D-VSIHmp.js";import{B as I}from"./BhvsvJQ2.js";import{bG as n,bC as T,bK as U,bL as V,bM as e,bR as r,bS as i,cc as v,ce as p,cf as C,cg as b,bO as N,bP as P,bT as o}from"./Cf7XUrrC.js";import"./BUmBeC9B.js";import"./EFZavzD9.js";const E={class:"space-y-6"},R={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},q={class:"p-4 border-b border-surface-200 dark:border-surface-700 flex flex-col sm:flex-row gap-4"},G={class:"relative flex-1"},K={class:"flex gap-2"},O={class:"overflow-x-auto"},Q={class:"w-full"},H={class:"divide-y divide-surface-100 dark:divide-surface-800"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-surface-600 dark:text-surface-300"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"flex items-center gap-3"},Y={class:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-600 to-accent-500 flex items-center justify-center text-white font-semibold"},Z={class:"text-sm font-medium text-surface-800 dark:text-white"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-surface-600 dark:text-surface-300"},te={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-surface-500"},le={class:"px-6 py-4 whitespace-nowrap"},ie={class:"flex items-center gap-2"},re={class:"p-4 border-t border-surface-200 dark:border-surface-700 flex items-center justify-between"},ne={class:"text-sm text-surface-500"},oe={class:"flex gap-2"},ue={class:"space-y-4"},de={class:"grid grid-cols-2 gap-4"},ve={class:"flex justify-end gap-3"},ye={__name:"UserManagementView",setup(pe){const w=n(""),f=n(""),x=n(""),c=n(1),y=n(10),k=n(5),m=n(!1),g=n("add"),u=n([{id:1,username:"张经理",avatar:"张",email:"zhang@example.com",role:"admin",status:"active",statusText:"已激活",registerTime:"2023-01-01 12:00:00"},{id:2,username:"李商家",avatar:"李",email:"li@example.com",role:"merchant",status:"active",statusText:"已激活",registerTime:"2023-01-02 10:30:00"},{id:3,username:"王用户",avatar:"王",email:"wang@example.com",role:"user",status:"pending",statusText:"待审核",registerTime:"2023-01-03 09:15:00"},{id:4,username:"赵管理员",avatar:"赵",email:"zhao@example.com",role:"admin",status:"active",statusText:"已激活",registerTime:"2023-01-04 14:45:00"},{id:5,username:"钱商家",avatar:"钱",email:"qian@example.com",role:"merchant",status:"inactive",statusText:"已禁用",registerTime:"2023-01-05 16:20:00"}]),s=n({id:null,username:"",avatar:"",email:"",role:"user",status:"active"}),M=T(()=>Math.ceil(k.value/y.value)),$=T(()=>u.value.filter(l=>{const t=l.username.toLowerCase().includes(w.value.toLowerCase()),a=!f.value||l.role===f.value,_=!x.value||l.status===x.value;return t&&a&&_})),z=T(()=>g.value==="add"?"添加用户":"编辑用户"),B=l=>({active:"success",pending:"warning",inactive:"danger"})[l]||"info",h=l=>({active:"已激活",pending:"待审核",inactive:"已禁用"})[l]||l,D=()=>{g.value="add",s.value={id:null,username:"",avatar:"",email:"",role:"user",status:"active"},m.value=!0},L=l=>{g.value="edit",s.value={...l},m.value=!0},j=l=>{if(confirm(`确定要删除用户 "${l.username}" 吗？`)){const t=u.value.findIndex(a=>a.id===l.id);t>-1&&u.value.splice(t,1)}},A=()=>{if(g.value==="add")s.value.id=u.value.length+1,s.value.avatar=s.value.username.charAt(0),s.value.statusText=h(s.value.status),s.value.registerTime=new Date().toLocaleString(),u.value.push({...s.value});else{const l=u.value.findIndex(t=>t.id===s.value.id);l>-1&&(s.value.avatar=s.value.username.charAt(0),s.value.statusText=h(s.value.status),u.value[l]={...s.value})}m.value=!1};return(l,t)=>(V(),U("div",E,[e("div",R,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-surface-800 dark:text-white"},"用户管理",-1)),r(d,{variant:"primary",onClick:D},{default:i(()=>[...t[11]||(t[11]=[e("i",{class:"fas fa-user-plus mr-2"},null,-1),v(" 添加用户 ",-1)])]),_:1})]),r(F,{padding:!1},{default:i(()=>[e("div",q,[e("div",G,[t[13]||(t[13]=e("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-surface-400"},null,-1)),p(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>w.value=a),placeholder:"搜索用户...",class:"input pl-10"},null,512),[[C,w.value]])]),e("div",K,[p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),class:"input w-auto"},[...t[14]||(t[14]=[e("option",{value:""},"全部角色",-1),e("option",{value:"admin"},"管理员",-1),e("option",{value:"merchant"},"商家",-1),e("option",{value:"user"},"普通用户",-1)])],512),[[b,f.value]]),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>x.value=a),class:"input w-auto"},[...t[15]||(t[15]=[e("option",{value:""},"全部状态",-1),e("option",{value:"active"},"已激活",-1),e("option",{value:"pending"},"待审核",-1),e("option",{value:"inactive"},"已禁用",-1)])],512),[[b,x.value]])])]),e("div",O,[e("table",Q,[t[18]||(t[18]=e("thead",{class:"bg-surface-50 dark:bg-surface-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"用户"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"邮箱"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"角色"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"状态"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"注册时间"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-surface-600 dark:text-surface-400 uppercase tracking-wider"},"操作")])],-1)),e("tbody",H,[(V(!0),U(N,null,P($.value,a=>(V(),U("tr",{key:a.id,class:"hover:bg-surface-50 dark:hover:bg-surface-800/50 transition-colors"},[e("td",J,o(a.id),1),e("td",W,[e("div",X,[e("div",Y,o(a.avatar),1),e("span",Z,o(a.username),1)])]),e("td",ee,o(a.email),1),e("td",te,[r(S,{variant:a.role==="admin"?"primary":"info"},{default:i(()=>[v(o(a.role==="admin"?"管理员":a.role==="merchant"?"商家":"普通用户"),1)]),_:2},1032,["variant"])]),e("td",ae,[r(S,{variant:B(a.status)},{default:i(()=>[v(o(h(a.status)),1)]),_:2},1032,["variant"])]),e("td",se,o(a.registerTime),1),e("td",le,[e("div",ie,[r(d,{variant:"ghost",size:"sm",onClick:_=>L(a)},{default:i(()=>[...t[16]||(t[16]=[e("i",{class:"fas fa-edit"},null,-1)])]),_:1},8,["onClick"]),r(d,{variant:"ghost",size:"sm",onClick:_=>j(a)},{default:i(()=>[...t[17]||(t[17]=[e("i",{class:"fas fa-trash text-danger-500"},null,-1)])]),_:1},8,["onClick"])])])]))),128))])])]),e("div",re,[e("p",ne," 显示 "+o((c.value-1)*y.value+1)+" 到 "+o(Math.min(c.value*y.value,k.value))+" 条，共 "+o(k.value)+" 条 ",1),e("div",oe,[r(d,{variant:"secondary",size:"sm",disabled:c.value===1,onClick:t[3]||(t[3]=a=>c.value--)},{default:i(()=>[...t[19]||(t[19]=[e("i",{class:"fas fa-chevron-left mr-1"},null,-1),v(" 上一页 ",-1)])]),_:1},8,["disabled"]),r(d,{variant:"secondary",size:"sm",disabled:c.value===M.value,onClick:t[4]||(t[4]=a=>c.value++)},{default:i(()=>[...t[20]||(t[20]=[v(" 下一页 ",-1),e("i",{class:"fas fa-chevron-right ml-1"},null,-1)])]),_:1},8,["disabled"])])])]),_:1}),r(I,{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=a=>m.value=a),title:z.value},{footer:i(()=>[e("div",ve,[r(d,{variant:"secondary",onClick:t[9]||(t[9]=a=>m.value=!1)},{default:i(()=>[...t[27]||(t[27]=[v("取消",-1)])]),_:1}),r(d,{variant:"primary",onClick:A},{default:i(()=>[...t[28]||(t[28]=[v("保存",-1)])]),_:1})])]),default:i(()=>[e("div",ue,[e("div",null,[t[21]||(t[21]=e("label",{class:"label"},"用户名",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>s.value.username=a),class:"input",placeholder:"请输入用户名"},null,512),[[C,s.value.username]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"label"},"邮箱",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[6]||(t[6]=a=>s.value.email=a),class:"input",placeholder:"请输入邮箱"},null,512),[[C,s.value.email]])]),e("div",de,[e("div",null,[t[24]||(t[24]=e("label",{class:"label"},"角色",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.value.role=a),class:"input"},[...t[23]||(t[23]=[e("option",{value:"admin"},"管理员",-1),e("option",{value:"merchant"},"商家",-1),e("option",{value:"user"},"普通用户",-1)])],512),[[b,s.value.role]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"label"},"状态",-1)),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>s.value.status=a),class:"input"},[...t[25]||(t[25]=[e("option",{value:"active"},"已激活",-1),e("option",{value:"pending"},"待审核",-1),e("option",{value:"inactive"},"已禁用",-1)])],512),[[b,s.value.status]])])])])]),_:1},8,["modelValue","title"])]))}};export{ye as default};
